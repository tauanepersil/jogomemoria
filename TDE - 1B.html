<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>

        .imagens {
            width: 100px;
            height: 100px;
           
        }

        
    </style>

</head>


<body>

<center>
            <h1>JOGO DA MEMÓRIA</h1>
    <div id="tabuleiro" class="cTabuleiro">
        <div class="acoes">
            <h3 id="relogio">Tempo:<SPAN>00:</SPAN><span id="segundos">59</span></h3>
            <h3> Pontuação: <span id="pontuacao">0</span></h3>
            <button onclick="iniciarJogo()" class="botoes">Iniciar Jogo</button>
            <br><br>

        </div>
        <div id="linha1" class="linhas">
            <img id="img_2_1" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_2_2" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_2_3" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_2_4" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_2_5" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_2_6" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            
           </div>

           <div id="linha3">
            <img id="img_3_1" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_3_2" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_3_3" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_3_4" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_3_5" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_3_6" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            
           </div>

           <div id="linha4">
            <img id="img_4_1" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_4_2" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_4_3" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_4_4" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_4_5" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_4_6" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            
           </div>

           <div id="linha5">
            <img id="img_5_1" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_5_2" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_5_3" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_5_4" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_5_5" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_5_6" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            
           </div>

           <div id="linha6">
            <img id="img_6_1" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_6_2" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_6_3" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_6_4" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_6_5" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
            <img id="img_6_6" src="./0.jpg" class="imagens" onclick="virarCarta(this)"/>
        </div>
        <button onclick="sortearCartas()"  class="botoes">Sortear</button>
    </div>
</center>
    <script>
        var arrayImagens = [1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,14,14,15,15,16,16,17,17,18,18]
    var tabuleiro6x6 = [
        [0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0]
    ]
        var qtdeCartasViradas = 0;
        var imagemAnteriorSelecionada = '';
        var imagemAnterior = '';
        var contador = 59;
        var pontuacao = 0;
        var qtdCartasRestantes = 18;
       
        console.log(arrayImagens);
        console.log(tabuleiro6x6);

        function sortearCartas() {
            let valorSorteado = 0;
            let posicaoSorteado = 0;
            let linha = 0;
            let coluna = 0;
            
            while (arrayImagens.length > 0) {
                posicaoSorteado = Math.floor(Math.random() * arrayImagens.length);
                console.log('oi');
                console.log(`Posicao ${posicaoSorteado}`);
                console.log(`Tamanho ${arrayImagens.length}`);
                console.log(arrayImagens);

                
                valorSorteado = arrayImagens[posicaoSorteado];
                
                tabuleiro6x6[linha][coluna] = valorSorteado;
                coluna++;
                if (coluna === 6) {
                    coluna = 0;
                    linha++;
                }
                arrayImagens.splice(posicaoSorteado, 1);
            }
            console.log(arrayImagens);
            console.log(tabuleiro6x6);
        }

        function virarCarta(pImagem) {
            
            let posicao = pImagem.id.split('_');
            
            let imagemAtual = tabuleiro6x6[posicao[1] - 1][posicao[2] - 1];
           
            if (pImagem.src === "http://127.0.0.1:5500/0.jpg") {
                pImagem.src = `img/${imagemAtual}.jpg`;
                qtdeCartasViradas++;
                console.log(`Qtde cartas viradas ${qtdeCartasViradas}`);
                if (qtdeCartasViradas === 2) {
                    
                    if (imagemAnteriorSelecionada === imagemAtual) {
                        setTimeout(function () {
                            alert('Acertou!! UUURRRUULLL!!');
                        }, 800);
                        pontuacao++;
                        document.querySelector('#pontuacao').innerHTML = pontuacao;
                        qtdeCartasViradas = 0;
                        qtdCartasRestantes--;
                    } else {
                        setTimeout(function () {
                            alert('Que pena!! Tente de novo!!');
                            qtdeCartasViradas = 0;
                            pImagem.src = `img/0.jpg`;
                            imagemAnterior.src = `img/0.jpg`  
                        }, 800);
                    }

                } else {
                    imagemAnteriorSelecionada = imagemAtual;
                    imagemAnterior = pImagem;
                }
            }
            if(qtdCartasRestantes === 0){
                alert("Jogo terminou parabens...");
            }           
        }

        function iniciarJogo() {

            if (contador === 0) {
                alert('Infelizmente seu tempo acabou!!! Que pena!!');
                clearTimeout(iniciarJogo);
            }
            else {
                contador--;
                document.querySelector('#segundos').innerHTML =
                   
                    contador < 10 ? '0' + contador : contador;
                setTimeout(iniciarJogo, 1000);
            }           
        }
    </script>
</body>

</html>