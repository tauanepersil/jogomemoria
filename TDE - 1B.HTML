<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>

        .imagens {
            width: 70px;
            height: 70px;
            padding: 20px 20px;
            border: 1px solid blue;
        }

        .linhas {
            border: 1px;
        }
    </style>

</head>

<body>
    <div id="tabuleiro" class="cTabuleiro">
        <div class="acoes">
            <h1 id="relogio">Tempo:<SPAN>00:</SPAN><span id="segundos">30</span></h1>
            <h1> Pontuação: <span id="pontuacao">0</span></h1>
            <button onclick="iniciarJogo()" class="botoes">Iniciar Jogo</button>

        </div>
        <div id="linha1" class="linhas">
            <img id="img_1_1" src="./img/0.png" class="imagens" onclick="virarCarta(this)" />
            <img id="img_1_2" src="./img/0.png" class="imagens" onclick="virarCarta(this)" />
            <img id="img_1_3" src="./img/0.png" class="imagens" onclick="virarCarta(this)" />
            <img id="img_1_4" src="./img/0.png" class="imagens" onclick="virarCarta(this)" />
            <img id="img_1_5" src="./img/0.png" class="imagens" onclick="virarCarta(this)" />
            <img id="img_1_6" src="./img/0.png" class="imagens" onclick="virarCarta(this)" />
        </div>
        <div id="linha2" class="linhas">
            <img id="img_2_1" src="./img/0.png" class="imagens" />
            <img id="img_2_2" src="./img/0.png" class="imagens" />
            <img id="img_2_3" src="./img/0.png" class="imagens" />
            <img id="img_2_4" src="./img/0.png" class="imagens" />
            <img id="img_2_5" src="./img/0.png" class="imagens" />
            <img id="img_2_6" src="./img/0.png" class="imagens" />

            <div id="linha3" class="linhas">
                <img id="img_3_1" src="./img/0.png" class="imagens" />
                <img id="img_3_2" src="./img/0.png" class="imagens" />
                <img id="img_3_3" src="./img/0.png" class="imagens" />
                <img id="img_3_4" src="./img/0.png" class="imagens" />
                <img id="img_3_5" src="./img/0.png" class="imagens" />
                <img id="img_3_6" src="./img/0.png" class="imagens" />
            </div>

            <div id="linha2" class="linhas">
                <img id="img_4_1" src="./img/0.png" class="imagens" />
                <img id="img_4_2" src="./img/0.png" class="imagens" />
                <img id="img_4_3" src="./img/0.png" class="imagens" />
                <img id="img_4_4" src="./img/0.png" class="imagens" />
                <img id="img_4_5" src="./img/0.png" class="imagens" />
                <img id="img_4_6" src="./img/0.png" class="imagens" />
            </div>

            <div id="linha2" class="linhas">
                <img id="img_5_1" src="./img/0.png" class="imagens" />
                <img id="img_5_2" src="./img/0.png" class="imagens" />
                <img id="img_5_3" src="./img/0.png" class="imagens" />
                <img id="img_5_4" src="./img/0.png" class="imagens" />
                <img id="img_5_5" src="./img/0.png" class="imagens" />
                <img id="img_5_6" src="./img/0.png" class="imagens" />
            </div>

            <div id="linha2" class="linhas">
                <img id="img_6_1" src="./img/0.png" class="imagens" />
                <img id="img_6_2" src="./img/0.png" class="imagens" />
                <img id="img_6_3" src="./img/0.png" class="imagens" />
                <img id="img_6_4" src="./img/0.png" class="imagens" />
                <img id="img_6_5" src="./img/0.png" class="imagens" />
                <img id="img_6_6" src="./img/0.png" class="imagens" />
            </div>
        </div>
        <button onclick="sortearCartas()"  class="botoes">Sortear</button>
    </div>

    <script>
        var arrayImagens = [1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6];
        var tabuleiro2x6 = [[0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0]];
        var qtdeCartasViradas = 0;
        var imagemAnteriorSelecionada = '';
        var imagemAnterior = '';
        var contador = 30;
        var pontuacao = 0;
        var qtdCartasRestantes = 18;
        
        console.log(arrayImagens);
        console.log(tabuleiro2x6);

        function sortearCartas() {
            let valorSorteado = 0;
            let posicaoSorteado = 0;
            let linha = 0;
            let coluna = 0;
          
            while (arrayImagens.length > 0) {
                posicaoSorteado = Math.floor(Math.random() * arrayImagens.length);
                console.log('oi');
                console.log(`Posicao ${posicaoSorteado}`);
                console.log(`Tamanho ${arrayImagens.length}`);
                console.log(arrayImagens);

                
                valorSorteado = arrayImagens[posicaoSorteado];
              
                tabuleiro2x6[linha][coluna] = valorSorteado;
                coluna++;
                if (coluna === 6) {
                    coluna = 0;
                    linha++;
                }
                arrayImagens.splice(posicaoSorteado, 1);
            }
            console.log(arrayImagens);
            console.log(tabuleiro2x6);
        }

        function virarCarta(pImagem) {
           
            let posicao = pImagem.id.split('_');
           
            let imagemAtual = tabuleiro2x6[posicao[1] - 1][posicao[2] - 1];
            
            if (pImagem.src === "http://127.0.0.1:5500/img/0.png") {
                pImagem.src = `img/${imagemAtual}.png`;
                qtdeCartasViradas++;
                console.log(`Qtde cartas viradas ${qtdeCartasViradas}`);
                if (qtdeCartasViradas === 2) {
                   
                    if (imagemAnteriorSelecionada === imagemAtual) {
                        setTimeout(function () {
                            alert('Acertou!! UUURRRUULLL!!');
                        }, 800);
                        pontuacao++;
                        document.querySelector('#pontuacao').innerHTML = pontuacao;
                        qtdeCartasViradas = 0;
                        qtdCartasRestantes--;
                    } else {
                        setTimeout(function () {
                            alert('Que pena!! Tente de novo!!');
                            qtdeCartasViradas = 0;
                            pImagem.src = `img/0.png`;
                            imagemAnterior.src = `img/0.png`  
                        }, 800);
                    }

                } else {
                    imagemAnteriorSelecionada = imagemAtual;
                    imagemAnterior = pImagem;
                }
            }
            if(qtdCartasRestantes === 0){
                alert("Jogo terminou parabens...");
            }           
        }

        function iniciarJogo() {

            if (contador === 0) {
                alert('Infelizmente seu tempo acabou!!! Que pena!!');
                clearTimeout(iniciarJogo);
            }
            else {
                contador--;
                document.querySelector('#segundos').innerHTML =
                    
                    contador < 10 ? '0' + contador : contador;
                setTimeout(iniciarJogo, 1000);
            }           
        }
    </script>
</body>

</html>